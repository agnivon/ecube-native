(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{308:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Te}));var r=n(445),i=n(439),o=n(56),a=n(0),s=Date.now(),c="https://nevo-json-server.herokuapp.com",l={MOVIES:{ALL:c+"/movies",LATEST:c+"/movies?_sort=releaseDate&_order=desc&releaseDate_lte="+s+"&_limit=50",RECOMMENDED:c+"/movies?_sort=rating&_order=desc&_limit=24",UPCOMING:c+"/movies?releaseDate_gte="+s+"&_limit=24"}},u={FETCH_REQUESTED:"movies/fetch/requested",FETCH_PENDING:"movies/fetch/pending",FETCH_SUCCESS:"movies/fetch/success",FETCH_FAILURE:"movies/fetch/fail",CONFIRM_BOOKING:"movies/booking/confirm"},j=n(136),d=n(310),b=n(17),O=n.n(b),f=n(3),x=n.n(f);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={movies:{all:[],latest:[],recommended:[],upcoming:[]},isLoading:{movies:!1},errored:{movies:!1},bookings:[]},m=n(18),p=n.n(m),y=n(87),S=n(262),w=n.n(S),C=p.a.mark(I),D=p.a.mark(E),k=p.a.mark(B);function T(e){return w.a.get(e).then((function(e){return e.data}))}function I(e){var t,n,r;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.category,n=u,i.prev=2,i.next=5,Object(y.put)({type:n.FETCH_PENDING,category:t});case 5:return i.next=7,Object(y.call)(T,e.payload.url);case 7:return r=i.sent,i.next=10,Object(y.put)({type:n.FETCH_SUCCESS,category:t,data:r});case 10:i.next=16;break;case 12:return i.prev=12,i.t0=i.catch(2),i.next=16,Object(y.put)({type:n.FETCH_FAILURE,category:t,message:i.t0.message});case 16:case"end":return i.stop()}}),C,null,[[2,12]])}function E(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.takeEvery)([u.FETCH_REQUESTED],I);case 2:case"end":return e.stop()}}),D)}function B(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.all)([E()]);case 2:case"end":return e.stop()}}),k)}var L=Object(d.default)(),P=Object(j.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.FETCH_PENDING:return v(v({},e),{},{isLoading:v(v({},e.isLoading),{},{movies:!0})});case u.FETCH_SUCCESS:return v(v({},e),{},{movies:v(v({},e.movies),{},x()({},t.category,t.data)),isLoading:v(v({},e.isLoading),{},{movies:!1})});case u.FETCH_FAILURE:return v(v({},e),{},{isLoading:v(v({},e.isLoading),{},{movies:!1}),errored:v(v({},e.errored),{},{movies:!0})});case u.CONFIRM_BOOKING:return v(v({},e),{},{bookings:[].concat(O()(e.bookings),[t.payload])});default:return e}}),Object(j.applyMiddleware)(L));L.run(B);var N=P,F=new(n(307).default),_=F.s,H=(F.c,n(440)),R=n(70),z=n(2),M=n(15),U=n(59),A=n(46),G=n(31),V=n(4);function J(e){var t=e.movie,n=Object(G.useNavigation)();return Object(V.jsx)(A.default,{onPress:function(){return n.navigate("Details",{id:t.id})},children:Object(V.jsxs)(M.Card,{style:[_.m3],children:[Object(V.jsx)(M.Card.Image,{style:[_.overflowHidden,{width:"100%",height:200}],source:{uri:t.posterImg}}),Object(V.jsxs)(z.default,{children:[Object(V.jsxs)(z.default,{style:[_.p2],children:[Object(V.jsx)(M.Text,{h3:!0,children:t.title}),Object(V.jsx)(M.Text,{h5:!0,children:t.director})]}),Object(V.jsx)(M.AirbnbRating,{isDisabled:!0,defaultRating:t.rating,showRating:!1,size:20}),Object(V.jsx)(z.default,{style:{flexDirection:"row",justifyContent:"flex-start",marginTop:10,marginBottom:10},children:t.genre.map((function(e,t){return Object(V.jsx)(M.Badge,{value:e,status:"warning",containerStyle:[_.mx1]},t)}))}),Object(V.jsxs)(M.Text,{style:[_.cardTextLastChild,_.p2,{textAlign:"justify"}],children:[t.plot.slice(0,200),"..."]}),Object(V.jsx)(M.Button,{size:"md",onPress:function(){n.navigate("Book",{id:t.id})},children:"Book"})]})]})})}var K=n(13);function Q(e){var t=e.lines,n=new Array(void 0===t?5:t).fill(0);return Object(V.jsx)(V.Fragment,{children:n.map((function(e,t){return Object(V.jsx)(K.default,{},t)}))})}var W=function(e){var t=e.item;return Object(V.jsx)(J,{movie:t},t.id)};function q(e){var t=e.movies;return Object(V.jsx)(z.default,{style:[_.flex1],children:Object(V.jsx)(U.default,{data:t,renderItem:W,keyExtractor:function(e){return e.id},ListFooterComponent:Object(V.jsx)(Q,{lines:8})})})}var X=n(55),Y=n(1),Z=Y.default.create({container:{flex:1,justifyContent:"center"},horizontal:{flexDirection:"row",justifyContent:"space-around",padding:10}}),$=function(){return Object(V.jsx)(z.default,{style:[Z.container,Z.horizontal],children:Object(V.jsx)(X.default,{size:"large"})})},ee=n(11),te=n.n(ee),ne=n(22),re=function(e){var t=e.title,n=e.text,r=Object(a.useState)(!0),i=te()(r,2),o=i[0],s=i[1];return Object(V.jsxs)(ne.default,{onPress:function(){return s((function(e){return!e}))},style:{height:"100%"},children:[Object(V.jsx)(K.default,{style:{textAlign:"center",marginVertical:20},children:"No bookings!"}),Object(V.jsxs)(M.Dialog,{isVisible:o,onBackdropPress:function(){return s(!1)},children:[Object(V.jsx)(M.Dialog.Title,{title:t}),Object(V.jsx)(K.default,{children:n})]})]})};function ie(e){e.navigation;var t=Object(o.useSelector)((function(e){return e.movies.latest}));return Object(o.useSelector)((function(e){return e.isLoading.movies}))?Object(V.jsx)($,{}):Object(V.jsxs)(z.default,{style:[_.container,_.flex1],children:[Object(V.jsx)(M.Text,{h1:!0,style:[_.textCenter,_.m2],children:"Latest Movies"}),Object(V.jsx)(M.Divider,{}),t.length?Object(V.jsx)(q,{movies:t}):Object(V.jsx)(re,{title:"No movies found",text:"No movies available currently"}),Object(V.jsx)(R.StatusBar,{style:"auto"})]})}var oe=n(43),ae=n(52);function se(e){var t=e.booking,n=e.showButtons,r=void 0===n||n,i=Object(G.useNavigation)(),o=[{label:"Booking ID",value:t.bookingId,icon:"info"},{label:"Movie Title",value:t.movie.title,icon:"theaters"},{label:"Show Date",value:t.showDate,icon:"today"},{label:"Show Timings",value:t.timings,icon:"schedule"},{label:"Seats",value:t.seats,icon:"star"}];return Object(V.jsxs)(oe.default,{children:[Object(V.jsxs)(M.Card,{style:[_.m3],children:[Object(V.jsx)(M.Card.Image,{style:[_.overflowHidden,{width:"100%",height:200}],source:{uri:t.movie.posterImg}}),Object(V.jsxs)(z.default,{children:[o.map((function(e,t){return function(e){var t=e.item,n=e.idx;return Object(V.jsxs)(ae.ListItem,{children:[Object(V.jsx)(ae.Icon,{name:t.icon}),Object(V.jsxs)(ae.ListItem.Content,{children:[Object(V.jsx)(ae.ListItem.Title,{children:t.label}),Object(V.jsx)(M.Text,{children:t.value})]})]},n)}({item:e,idx:t})})),r&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(M.Card.Divider,{}),Object(V.jsx)(M.Button,{size:"md",onPress:function(){i.navigate("Bookings")},containerStyle:[_.my1],children:"Go to my Bookings"}),Object(V.jsx)(M.Button,{size:"md",onPress:function(){i.navigate("Home",{initialPage:"Bookings"})},containerStyle:[_.my2],children:"Go to Home"})]})]})]}),r&&Object(V.jsx)(Q,{lines:5})]})}var ce=function(e){var t=e.item;return Object(V.jsx)(se,{booking:t,showButtons:!1},t.bookingId)};function le(e){var t=e.bookings;return Object(V.jsx)(z.default,{style:[_.flex1],children:Object(V.jsx)(U.default,{data:t,renderItem:ce,keyExtractor:function(e){return e.bookingId},ListFooterComponent:Object(V.jsx)(Q,{lines:8})})})}function ue(e){e.navigation;var t=Object(o.useSelector)((function(e){return e.bookings}));return Object(V.jsxs)(z.default,{style:[_.container,_.flex1],children:[Object(V.jsx)(M.Text,{h1:!0,style:[_.textCenter,_.m2],children:"Bookings"}),Object(V.jsx)(M.Divider,{}),t.length?Object(V.jsx)(le,{bookings:t}):Object(V.jsx)(re,{title:"No Bookings",text:"Make a booking to see bookings here"}),Object(V.jsx)(R.StatusBar,{style:"auto"})]})}function je(e){var t,n=e.route,r=(e.navigation,Object(o.useDispatch)()),i=(null==(t=n.params)?void 0:t.initialPage)||"LatestMovies";Object(a.useEffect)((function(){r(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return{type:u.FETCH_REQUESTED,payload:{category:e,url:l.MOVIES[e.toUpperCase()]}}}("latest"))}),[r]);var s=Object(H.default)();return Object(V.jsxs)(s.Navigator,{initialRouteName:i,screenOptions:function(e){var t=e.route;return{tabBarIcon:function(e){var n;e.focused,e.color,e.size;return"LatestMovies"===t.name?n="home":"Bookings"===t.name&&(n="ticket"),Object(V.jsx)(M.Icon,{name:n,type:"font-awesome"})},tabBarActiveTintColor:"tomato",tabBarInactiveTintColor:"gray",headerShown:!1}},children:[Object(V.jsx)(s.Screen,{name:"LatestMovies",component:ie,options:{title:"Latest Movies"}}),Object(V.jsx)(s.Screen,{name:"Bookings",component:ue})]})}function de(e){var t=e.movie,n=Object(G.useNavigation)(),r=Object(V.jsx)(z.default,{style:{flexDirection:"row",justifyContent:"flex-start",marginTop:10,marginBottom:10},children:t.genre.map((function(e,t){return Object(V.jsx)(M.Badge,{value:e,status:"warning",containerStyle:[_.mx1]},t)}))}),i=Object(V.jsx)(M.AirbnbRating,{isDisabled:!0,defaultRating:t.rating,showRating:!1,size:20}),o=[{label:"Title",value:t.title,icon:"theaters"},{label:"Director",value:t.director,icon:"person"},{label:"Genre",value:r,icon:"info"},{label:"Release Date",value:new Date(t.releaseDate).toLocaleDateString(),icon:"event"},{label:"Duration",value:t.duration,icon:"timelapse"},{label:"Rating",value:i,icon:"star"}];return Object(V.jsxs)(oe.default,{children:[Object(V.jsxs)(M.Card,{style:[_.m3],children:[Object(V.jsx)(M.Card.Image,{style:[_.overflowHidden,{width:"100%",height:200}],source:{uri:t.posterImg}}),Object(V.jsxs)(z.default,{children:[o.map((function(e,t){return function(e){var t=e.item,n=e.idx;return Object(V.jsxs)(ae.ListItem,{bottomDivider:!0,children:[Object(V.jsx)(ae.Icon,{name:t.icon}),Object(V.jsxs)(ae.ListItem.Content,{children:[Object(V.jsx)(ae.ListItem.Title,{children:t.label}),["Genre","Rating"].includes(t.label)?Object(V.jsx)(V.Fragment,{children:t.value}):Object(V.jsx)(M.Text,{children:t.value})]})]},n)}({item:e,idx:t})})),Object(V.jsx)(M.Card.Divider,{}),Object(V.jsx)(M.Text,{h4:!0,children:"Plot"}),Object(V.jsx)(M.Text,{style:{textAlign:"justify"},children:t.plot}),Object(V.jsx)(M.Button,{size:"md",onPress:function(){n.navigate("Book",{id:t.id})},children:"Book"})]})]}),Object(V.jsx)(Q,{lines:5})]})}var be=n(26),Oe=n.n(be);function fe(e){var t=Object(o.useSelector)((function(e){return e.movies.latest}));return Oe.a.find(t,{id:e})}function xe(e){var t=fe(e.route.params.id);return Object(V.jsxs)(z.default,{style:[_.container],children:[Object(V.jsx)(M.Text,{h1:!0,style:[_.textCenter,_.m2],children:"Movie Details"}),Object(V.jsx)(M.Divider,{}),Object(V.jsx)(de,{movie:t}),Object(V.jsx)(R.StatusBar,{style:"auto"})]})}var he=n(309),ve=n(299),ge=n.n(ve);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t=e.data,n=e.value,r=e.onChange;return Object(V.jsx)(he.Dropdown,{style:we.dropdown,placeholderStyle:we.placeholderStyle,selectedTextStyle:we.selectedTextStyle,inputSearchStyle:we.inputSearchStyle,iconStyle:we.iconStyle,data:t,search:!0,maxHeight:300,labelField:"label",valueField:"value",placeholder:"Select item",searchPlaceholder:"Search...",value:n,onChange:r})};function Se(e){var t=e.movie,n=Object(G.useNavigation)(),r=Object(o.useDispatch)(),i=function(e){return new Date(e).toLocaleDateString()},s=function(e){return{label:String(e),value:String(e)}},c=function(e){return function(t){return b((function(n){return pe(pe({},n),{},x()({},e,t.value))}))}},l=Object(a.useState)({bookingId:null,movieId:t.id,showDate:i(t.showings[0].date),timings:"",seats:"1",movie:t}),j=te()(l,2),d=j[0],b=j[1],O=[{label:"Title",value:Object(V.jsx)(M.Text,{children:t.title}),icon:"theaters"},{label:"Show Date",value:Object(V.jsx)(ye,{data:t.showings.map((function(e){return s(i(e.date))})),value:d.showDate,onChange:c("showDate")}),icon:"today"},{label:"Timings",value:Object(V.jsx)(ye,{data:t.showings.filter((function(e){return i(e.date)===d.showDate}))[0].timings.map((function(e){return s(e)})),value:d.timings,onChange:c("timings")}),icon:"schedule"},{label:"No. of seats",value:Object(V.jsx)(ye,{data:[1,2,3,4,5,6,7,8,9,10].map((function(e){return s(e)})),value:d.seats,onChange:c("seats")}),icon:"star"}];return Object(V.jsxs)(oe.default,{children:[Object(V.jsxs)(M.Card,{style:[_.m3],children:[Object(V.jsx)(M.Card.Image,{style:[_.overflowHidden,{width:"100%",height:200}],source:{uri:t.posterImg}}),Object(V.jsxs)(z.default,{children:[O.map((function(e,t){return function(e){var t=e.item,n=e.idx;return Object(V.jsxs)(ae.ListItem,{bottomDivider:!0,children:[Object(V.jsx)(ae.Icon,{name:t.icon}),Object(V.jsxs)(ae.ListItem.Content,{children:[Object(V.jsx)(ae.ListItem.Title,{children:t.label}),t.value]})]},n)}({item:e,idx:t})})),Object(V.jsx)(M.Card.Divider,{}),Object(V.jsx)(M.Button,{size:"md",onPress:function(){var e,t=ge()(JSON.stringify(d)).toString();r((e=pe(pe({},d),{},{bookingId:t}),{type:u.CONFIRM_BOOKING,payload:e})),n.navigate("Booking",{id:t})},children:"Confirm Booking"})]})]}),Object(V.jsx)(Q,{lines:5})]})}var we=Y.default.create({container:{backgroundColor:"white",padding:16},dropdown:{height:50,width:200,borderColor:"gray",borderWidth:.5,borderRadius:8,paddingHorizontal:8,marginVertical:5},icon:{marginRight:5},label:{position:"absolute",backgroundColor:"white",left:22,top:8,zIndex:999,paddingHorizontal:8,fontSize:14},placeholderStyle:{fontSize:16},selectedTextStyle:{fontSize:16},iconStyle:{width:20,height:20},inputSearchStyle:{height:40,fontSize:16}});function Ce(e){var t=fe(e.route.params.id);return Object(V.jsxs)(z.default,{style:[_.container],children:[Object(V.jsx)(M.Text,{h1:!0,style:[_.textCenter,_.m2],children:"Book Show"}),Object(V.jsx)(M.Divider,{}),Object(V.jsx)(Se,{movie:t}),Object(V.jsx)(R.StatusBar,{style:"auto"})]})}function De(e){var t=function(e){var t=Object(o.useSelector)((function(e){return e.bookings}));return Oe.a.find(t,{bookingId:e})}(e.route.params.id);return Object(V.jsxs)(z.default,{style:[_.container],children:[Object(V.jsx)(M.Text,{h1:!0,style:[_.textCenter,_.m2],children:"Booking Details"}),Object(V.jsx)(M.Divider,{}),Object(V.jsx)(se,{booking:t}),Object(V.jsx)(R.StatusBar,{style:"auto"})]})}var ke=Object(i.default)();function Te(){return Object(V.jsx)(o.Provider,{store:N,children:Object(V.jsx)(r.default,{children:Object(V.jsxs)(ke.Navigator,{screenOptions:{headerStyle:{backgroundColor:"#f4511e"},headerTintColor:"#fff",headerTitleStyle:{fontWeight:"bold"}},children:[Object(V.jsx)(ke.Screen,{name:"Home",component:je,options:{title:"Home"}}),Object(V.jsx)(ke.Screen,{name:"Details",component:xe,options:{title:"Details"}}),Object(V.jsx)(ke.Screen,{name:"Book",component:Ce,options:{title:"Book"}}),Object(V.jsx)(ke.Screen,{name:"Booking",component:De,options:{title:"Booking"}})]})})})}},316:function(e,t,n){e.exports=n(414)},372:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=372},412:function(e,t){}},[[316,1,2]]]);
//# sourceMappingURL=app.0c3e69d5.chunk.js.map